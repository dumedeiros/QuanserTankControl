<?xml version="1.0" encoding="iso-8859-1"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Number Formatting - Recursive Number Scaling</title>
<link rel="stylesheet" href="../../assets/ui/css/style.css" type="text/css" />
<script type="text/javascript" src="../../assets/prettify/prettify.js"></script>
<link rel="stylesheet" type="text/css" href="../../assets/prettify/prettify.css" />
<script type="text/javascript" src="../../assets/ui/js/jquery.min.js" ></script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }

a.whtbtnhide, a.whtbtnshow, a.whtbtnhidenav , a.whtbtnshownav { border-bottom:none !important; }
-->
</style>
<script type="text/javascript" language="javascript1.2" src="../../assets/ui/js/whmsg.js"></script>
<script type="text/javascript" language="javascript" src="../../assets/ui/js/whver.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../assets/ui/js/whproxy.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../assets/ui/js/whutils.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../assets/ui/js/whlang.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../assets/ui/js/whtopic.js"></script>
<script type="text/javascript" src="../../assets/ui/js/lib.js"></script>
</head>

<body>
<!-- breadcrumb starts here -->
<div id="breadcrumb"></div>
<script type="text/javascript">
	document.write( addFCBreadcrumb( [ "Home|../../Introduction/Overview.html", "Advanced Charting", "Number Formatting|Basics.html", "Recursive Number Scaling" ] ) );
</script>
<!-- breadcrumb ends here -->

<table width="98%" border="0" cellspacing="0" cellpadding="3" align="center">
  <tr> 
    <td width="100%" class="pageHeader">Recursive Number Scaling </td>
  </tr>
  <tr>
    <td valign="top" class="text"><p>Recursive number scaling comes into the picture when you have number scales defined for your chart. Let's jump to an example straightaway to understand this better. </p>
      <p>Suppose we have a linear gauge which plots the time taken by a machine to do various tasks. Since the task can take any amount of time ranging from a few seconds to a few days, it is very tricky to select a unit in which to show the data. Hence, we will define a number scale for the chart which will take seconds as the basic unit and convert it into minutes, hours, weeks, etc. depending on the value. The number scale for the chart will be:</p>
      <p>60 seconds = 1 minute<br />
60 minute = 1 hr<br />
24 hrs = 1 day<br />
7 days = 1   week</p>
      <p>We can define the same in our chart using:</p>
      <p><span class="codeInline">&lt;chart defaultNumberScale='s' numberScaleValue='60,60,24,7'   numberScaleUnit='min,hr,day,wk' formatNumberScale='1' ... &gt;</span>  </p>
      <p>Please see the <a href="NumScaling.html">Number Scaling</a> page for more details on how to build a number scale. Now let's consider the XML below: </p></td>
  </tr>
 
  <tr>
    <td>
	 <div class="container">
    <ul class="tabs">
       <li><a href="#tab1">XML</a></li>
       <li><a href="#tab2">JSON</a></li>
    </ul>
    <div class="tab_container">
       <div id="tab1" class="tab_content">
	<pre class="code_container prettyprint">&lt;chart lowerLimit=&quot;0&quot; upperLimit=&quot;100000&quot; defaultNumberScale=&quot;s&quot; numberScaleValue=&quot;60,60,24,7&quot; numberScaleUnit=&quot;mins,hrs,days,wks&quot; formatNumberScale=&quot;1&quot; majorTMNumber=&quot;3&quot; chartLeftMargin=&quot;75&quot; chartRightMargin=&quot;75&quot;&gt;<br />  &lt;colorRange&gt;<br />    &lt;color minValue=&quot;0&quot; maxValue=&quot;100000&quot; code=&quot;F6BD0F&quot;/&gt;<br />  &lt;/colorRange&gt;

	&lt;pointers&gt; 
		&lt;pointer value=&quot;94000&quot;/&gt; 
		&lt;pointer value=&quot;7400&quot;/&gt; 
	&lt;/pointers&gt;
	
&lt;/chart&gt;</pre>
       </div>
	<div id="tab2" class="tab_content">
  
  <pre id="pre-datajson" class="prettyprint code_container">{
  "chart": {
    "lowerlimit": "0",
    "upperlimit": "100000",
    "defaultnumberscale": "s",
    "numberscalevalue": "60,60,24,7",
    "numberscaleunit": "mins,hrs,days,wks",
    "formatnumberscale": "1",
    "majortmnumber": "3",
    "chartleftmargin": "75",
    "chartrightmargin": "75"
  },
  "colorrange": {
    "color": [
      {
        "minvalue": "0",
        "maxvalue": "100000",
        "code": "F6BD0F"
      }
    ]
  },
  
  "pointers": {
    "pointer": [
      {   "value": "94000"    }
      {   "value": "7400"    }
    ]
  }
 
}</pre></div></div></div>
  <div style="clear:both"></div>
	</td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">The above XML/JSON when used for a horizontal linear gauge will give us this: </td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text"><img src="../Images/AC_RecNum1.jpg" width="450" height="100" /></td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">You can see above how owing to the number scale we defined, the values in seconds are getting converted into hours, mins etc. according to the magnitude of the value entered. Neat work, but wouldn't you rather prefer this? </td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text"><img src="../Images/AC_RecNum2.jpg" width="450" height="100" /></td>
  </tr>
 
  <tr>
    <td valign="top" class="text"><p>Notice how 2.06 hours is converted to 2 hrs, 3 mins and 20 s; 1.09 days to 1 day, 2 hrs, 6 mins and 40 s. This chart makes use of recursive number scaling and after converting the time in seconds to say hours, whatever is left over is not converted into decimals and shown. It is rather converted into smaller units of time and broken down as far as possible - so the remaining seconds are first converted to minutes and then when the seconds are too few to be converted into minutes, then they are displayed in seconds itself. This gives us a fair idea of how much time was used for each task. </p>
      <p>To use recursive number scaling, all you have to do is set <span class="codeInline">&lt;chart ... scaleRecursively='1' .. &gt;. </span><span class="text">You can also define the separator you want to use to separate the various units making up time for a task using </span><span class="codeInline">scaleSeparator</span><span class="text">. In the above example, we have used commas to separate the hours from minutes and minutes from seconds. So we had to set</span><span class="codeInline"> scaleSeparator=','</span><span class="text">.</span> You can set the same to any character you want. </p>
      <p>The entire XML for the chart above is: </p></td>
  </tr>
 
  <tr>
    <td>
	 <div class="container">
    <ul class="tabs">
       <li><a href="#tab3">XML</a></li>
       <li><a href="#tab4">JSON</a></li>
    </ul>
    <div class="tab_container">
       <div id="tab3" class="tab_content">
	<pre class="code_container prettyprint">&lt;chart <strong>scaleRecursively=&quot;1&quot; scaleSeparator=&quot;, &quot; </strong>lowerLimit=&quot;0&quot; upperLimit=&quot;100000&quot; defaultNumberScale=&quot;s&quot; numberScaleValue=&quot;60,60,24,7&quot; numberScaleUnit=&quot;mins,hrs,days,wks&quot; formatNumberScale=&quot;1&quot; majorTMNumber=&quot;3&quot; chartLeftMargin=&quot;75&quot; chartRightMargin=&quot;75&quot;&gt;<br />  &lt;colorRange&gt;<br />    &lt;color minValue=&quot;0&quot; maxValue=&quot;100000&quot; code=&quot;F6BD0F&quot;/&gt;<br />  &lt;/colorRange&gt;

	&lt;pointers&gt; 
		&lt;pointer value=&quot;94000&quot;/&gt; 
		&lt;pointer value=&quot;7400&quot;/&gt; 
	&lt;/pointers&gt;

&lt;/chart&gt;</pre>
       </div>
	<div id="tab4" class="tab_content">
  
  <pre id="pre-datajson" class="prettyprint code_container">{
  "chart": {
    "lowerlimit": "0",
    "upperlimit": "100000",
    "defaultnumberscale": "s",
    "numberscalevalue": "60,60,24,7",
    "numberscaleunit": "mins,hrs,days,wks",
    "formatnumberscale": "1",
    "majortmnumber": "3",
    "chartleftmargin": "75",
    "chartrightmargin": "75",
<strong>    "scalerecursively": "1",
    "scaleseparator": ", "</strong>
  },
  "colorrange": {
    "color": [
      {
        "minvalue": "0",
        "maxvalue": "100000",
        "code": "F6BD0F"
      }
    ]
  },
   
  "pointers": {
    "pointer": [
      {   "value": "94000"    }
      {   "value": "7400"    }
    ]
  }
   
}</pre>
	</div></div></div>
  <div style="clear:both"></div>
	</td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="header"><a name="recursionlevels"></a>Controlling the levels of recursion </td>
  </tr>
   <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">Suppose in the above chart, instead of  1 day, 2 hrs, 6 mins and 40 s, you are pretty happy with showing 1 day, 2 hrs itself either for space constraints or some other reason. You can control the levels of recursion all the numbers on your chart are showing using <span class="codeInline">maxScaleRecursion</span>. Suppose you want only 2 levels of recursion, then set <span class="codeInline">&lt;chart ... maxScaleRecursion='2'&gt;</span>. This will convert the above chart to: </td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text"><img src="../Images/AC_RecNum3.jpg" width="450" height="100" /></td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">Notice how all the numbers on the chart are using a maximum of 2 time units - the rest have been truncated. When you want all the units of a number to be shown on the chart, you can either omit the <span class="codeInline">maxScaleRecursion</span> attribute or set it to -1. </td>
  </tr>
  
</table>
<!-- footer links starts-->
<div id="fcfooter"></div>
<script type="text/javascript">
	document.getElementById("fcfooter").innerHTML =  addFCFooter("Number Scaling|NumScaling.html","Input Number Formatting|FormInNum.html");
</script>
<!-- footer links ends -->
<script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--

	highlightSearch();

//-->
</script>
</body>
</html>
