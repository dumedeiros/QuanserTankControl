<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>FusionWidgets &amp; JavaScript - Updating chart using setXMLUrl() Method</title>	
	<script type="text/javascript" src="../../Charts/FusionCharts.js"></script>
		<script type="text/javascript" language="Javascript" src="../assets/ui/js/jquery.min.js"></script>
		<script type="text/javascript" language="Javascript" src="../assets/ui/js/lib.js"></script>

        <link href="../assets/ui/css/style.css" rel="stylesheet" type="text/css" />

        <!--[if IE 6]>
        <script type="text/javascript" src="../assets/ui/js/DD_belatedPNG_0.0.8a-min.js"></script>

		<script>
          /* select the element name, css selector, background etc */
          DD_belatedPNG.fix('img');

          /* string argument can be any CSS selector */
        </script>
        <![endif]-->
		
		<style type="text/css">
            h2.headline {
                font: normal 110%/137.5% "Trebuchet MS", Arial, Helvetica, sans-serif;
                padding: 0;
                margin: 25px 0 25px 0;
                color: #7d7c8b;
                text-align: center;
            }
            p.small {
                font: normal 68.75%/150% Verdana, Geneva, sans-serif;
                color: #919191;
                padding: 0;
                margin: 0 auto;
                width: 664px;
                text-align: center;
            }
        </style>
		<script LANGUAGE="JavaScript">
		//updateChart method is called whenever the user clicks the button to
		//update the chart. Here, we get a reference to the chart and update it's
		//data using setXMLUrl method.
		function updateChart(){
			//Get reference to chart object using Dom ID
			var chartObj = FusionCharts("chart1Id");
			//Update it's URL
			chartObj.setXMLUrl("NewData.xml");			
			//Disable the button
			this.document.frmUpdate.btnUpdate.disabled = true;
		}
	</script>
		
		</head>
<body>
	<div id="wrapper">

            <div id="header">
                

               <div class="logo"><a class="imagelink"  href="http://www.fusioncharts.com/widgets" target="_blank"><img src="../assets/ui/images/fwxt-logo.png" width="73" height="74" alt="FusionWidgets XT logo" /></a></div>
				 <h1 class="brand-name">FusionWidgets XT</h1>
		 <h1 class="logo-text">FusionWidgets &amp; JavaScript - Updating chart using setXMLUrl() </h1>
		 </div>
		 <div class="content-area">
                <div id="content-area-inner-main">
				<p class="text" align="center">Click <strong>Change Data</strong> to update the data of the funnel chart. </p>
				<div id="messageBox" style="margin-left:130px; margin-right:130px; display:none;"></div>
					<p>&nbsp;</p>

                    <div class="gen-chart-render">
		
		<div id="chart1div">
			FusionWidgets
		</div>
		<script language="JavaScript">					
			var chart1 = new FusionCharts("../../Charts/Funnel.swf", "chart1Id", "500", "450", "0", "1");		   			
			chart1.setXMLData("<chart caption='Conversion Ratio' subcaption='May 2007' showPercentValues='1' decimals='1' baseFontSize='11' percentOfPrevious='1' showPlotBorder='1' funnelYScale='15' labelSepChar=': '><set label='Website Visits' value='385634' /><set label='Downloads' value='175631'  /><set label='Interested to buy' value='84564' /><set label='Contract finalized' value='35654' /><set label='Purchased' value='12342' /></chart>");
			chart1.render("chart1div");
			
			chart1.addEventListener( "nodatatodisplay", function() { 
				if ( window.windowIsReady ){
					notifyLocalAJAXSecurityRestriction(); 
				}else
				{
					$(document).ready (function(){
						notifyLocalAJAXSecurityRestriction();
					});
				}
			});
		</script>
		<br />
		<form name='frmUpdate'>
		<input type='button' value='Change Data' onClick='javaScript:updateChart();' name='btnUpdate' />		
		</form>
		<div class="underline-dull"></div>
		<div id="footer">
                <p class="highlightBlock">The above sample showcases how to update chart data using <strong>setXMLUrl</strong> JavaScript API. Click <a href="../../Contents/Index.html?JavaScript/JS_ChangeData.html#setdataurl" target="_blank">here</a> to know more on how the code of this example works.</p>
            </div>
</div></div></div></div>
 <script type="text/javascript"><!--//
		 
			$(document).ready(function() {
				window.windowIsReady = true;
				showConditionalMessage( "Your browser does not seem to have Flash Player support. A JavaScript chart is rendered instead.", isJSRenderer(chart1) );
			});	
			
			function notifyLocalAJAXSecurityRestriction()
			{
				if(isLocal())
				{
					addConditionalMessage( "<br /><br /><strong>Unable to see the chart below?</strong><br />"+isLocal()+"This sample uses data provided as URL. If you are unable to see the chart below, it is due to the browser's restriction on JavaScript from accessing local file system owing to security reasons. If you run the sample from a server, it will run absolutely fine, though. When running locally, however, if you provide the data as string, it works fine. Click <a href='ChangeDataXML.html'>here</a> to check out a sample using data as string.", isJSRenderer(chart1) );
				}
			}

			
		// -->
		</script>
</body>
</html>
